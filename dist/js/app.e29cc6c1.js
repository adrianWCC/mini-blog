(function(t){function e(e){for(var s,i,o=e[0],u=e[1],c=e[2],p=0,d=[];p<o.length;p++)i=o[p],r[i]&&d.push(r[i][0]),r[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},r={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0b2f":function(t,e,n){"use strict";var s=n("515e"),r=n.n(s);r.a},"0bc5":function(t,e,n){"use strict";var s=n("ab1b"),r=n.n(s);r.a},"0d66":function(t,e,n){"use strict";var s=n("b7d2"),r=n.n(s);r.a},"515e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var s=n("2b0e"),r=n("8c4f"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o={name:"app"},u=o,c=(n("5c0b"),n("2877")),l=Object(c["a"])(u,a,i,!1,null,null,null),p=l.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("form",{staticClass:"form",attrs:{action:""}},[n("div",{staticClass:"form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入帐号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"text",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"form-button"},[n("button",{on:{click:t.submit}},[t._v("注册")])])])])},f=[],m={data:function(){return{username:"",password:""}},methods:{submit:function(){if(!this.username||!this.password)return!1;this.$apis.signUp(this.username,this.password)}}},v=m,h=(n("0b2f"),Object(c["a"])(v,d,f,!1,null,"62dcab90",null)),b=h.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("form",{staticClass:"form",attrs:{action:""}},[n("div",{staticClass:"form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入帐号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"text",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"form-button"},[n("button",{on:{click:t.submit}},[t._v("登 录")])])])])},w=[],x=n("f499"),_=n.n(x),y=(n("96cf"),n("3b8d")),C={data:function(){return{username:"",password:""}},methods:{submit:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.username&&this.password){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.$apis.login(this.username,this.password);case 4:if(e=t.sent.data,e){t.next=8;break}return this.$router.push("/regist"),t.abrupt("return");case 8:n={username:e.username,objectId:e.objectId},window.localStorage.setItem("user",_()(n)),this.$router.push("/home");case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},j=C,$=(n("d131"),Object(c["a"])(j,g,w,!1,null,"7e5d8d50",null)),O=$.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"list"},t._l(t.list,function(e){return n("div",{key:e.objectId,staticClass:"item"},[n("div",{staticClass:"item-img"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:e.imgList[0],alt:"",width:"100%",height:"100%"}})])]),n("div",{staticClass:"item-dsc"},[n("p",[t._v(t._s(e.content))])]),n("div",{staticClass:"item-auth"},[t._m(0,!0),n("div",{staticClass:"name"},[t._v("\n          "+t._s(e.username)+"\n        ")])])])}),0),n("footer-bar")],1)},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"avatar"},[s("img",{attrs:{src:n("e94e"),alt:"",width:"100%",height:"100%"}})])}],I=(n("ac6a"),n("7514"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["foot-bar",t.toggleClass]},[n("router-link",{attrs:{to:"/home"}},[n("div",[t._v("home")])]),n("router-link",{attrs:{to:"/publish"}},[n("div",[t._v("publish")])]),n("router-link",{attrs:{to:"/mine"}},[n("div",[t._v("mine")])])],1)}),P=[],F={data:function(){return{scrollDirection:"",defaultScroll:0}},mounted:function(){this.scrollFn()},methods:{scrollFn:function(){var t=this;window.onscroll=function(){var e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e>t.defaultScroll?t.scrollDirection="down":e<t.defaultScroll&&(t.scrollDirection="up"),t.defaultScroll=e}}},computed:{toggleClass:function(){return"down"===this.scrollDirection?"hide":"show"}}},S=F,z=(n("db24"),Object(c["a"])(S,I,P,!1,null,"7ec724c8",null)),L=z.exports,J={data:function(){return{list:[]}},mounted:function(){this.queryList()},methods:{queryList:function(){var t=this,e=new this.$AV.Query("Blog");e.find().then(function(e){e.length&&e.forEach(function(e){e.attributes["objectId"]=e.id,t.list.push(e.attributes)})})}},components:{FooterBar:L}},U=J,Y=(n("0bc5"),Object(c["a"])(U,E,k,!1,null,"6c08bd8e",null)),G=Y.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"txt-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"txt",attrs:{rows:"10"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),n("div",{staticClass:"img-box"},[t._l(t.uploadFiles,function(t,e){return n("div",{key:e,staticClass:"img-item"},[n("img",{attrs:{width:"100%",height:"100%",src:t,alt:""}})])}),t.uploadFiles.length<4?n("div",{staticClass:"img-item"},[n("input",{ref:"inputFile",staticClass:"upload-btn",attrs:{type:"file"},on:{change:t.beforeUpload}})]):t._e()],2),n("div",{staticClass:"form-button btn-box"},[n("button",{on:{click:t.publish}},[t._v("发 布")])])])},M=[],N={data:function(){return{content:"",uploadFiles:[]}},methods:{beforeUpload:function(){var t=this;if(!(this.$refs.inputFile.files.length<1)){var e=this.$refs.inputFile.files[0],n="custom-img",s=new this.$AV.File(n,e);s.save().then(function(e){t.uploadFiles.push(e.url())},function(t){throw new Error(t)})}},publish:function(){var t=window.localStorage.getItem("user");if(t){var e=JSON.parse(t),n=this.$AV.Object.extend("Blog"),s=new n;s.set("userId",e.objectId),s.set("username",e.username),s.set("content",this.content),s.set("imgList",this.uploadFiles),s.save().then(function(){},function(t){throw new Error(t)})}else this.$route.push("/login")}}},T=N,K=(n("cbad"),Object(c["a"])(T,H,M,!1,null,"4a3ff632",null)),A=K.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("footer-bar")],1)},D=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topic"},[s("div",{staticClass:"avatar-box"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:n("e94e"),alt:"",width:"100%",height:"100%"}})]),s("p",[t._v("祁连山的冰")])])])}],V={data:function(){return{}},components:{FooterBar:L}},R=V,q=(n("0d66"),Object(c["a"])(R,B,D,!1,null,"5ad17db0",null)),Q=q.exports,W=[{path:"/home",component:G},{path:"/regist",component:b},{path:"/login",component:O},{path:"/publish",component:A},{path:"/mine",component:Q}],X=n("795b"),Z=n.n(X),tt=n("bc3a"),et=n.n(tt),nt=et.a.create({baseURL:"https://hfjzvymi.api.lncld.net/1.1",headers:{"x-avoscloud-application-id":"HfJzvYmInaLcGgIeKYHU2xiK-gzGzoHsz","x-avoscloud-application-key":"sEM6i1sE9eEPpGIh9xJLPipY","Content-Type":"application/json"}});nt.interceptors.response.use(function(t){return t},function(){return Z.a.resolve({data:null})});var st={signUp:function(t,e){return nt.post("/users",{username:t,password:e})},login:function(t,e){return nt.post("/login",{username:t,password:e})}},rt=n("0631"),at="HfJzvYmInaLcGgIeKYHU2xiK-gzGzoHsz",it="sEM6i1sE9eEPpGIh9xJLPipY";rt.init({appId:at,appKey:it}),s["a"].config.productionTip=!1,s["a"].prototype.$apis=st,s["a"].prototype.$AV=rt,s["a"].use(r["a"]);var ot=new r["a"]({routes:W});new s["a"]({router:ot,render:function(t){return t(p)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("5e27"),r=n.n(s);r.a},"5e27":function(t,e,n){},6057:function(t,e,n){},"6a85":function(t,e,n){},ab1b:function(t,e,n){},b7d2:function(t,e,n){},cbad:function(t,e,n){"use strict";var s=n("6a85"),r=n.n(s);r.a},d131:function(t,e,n){"use strict";var s=n("db97"),r=n.n(s);r.a},db24:function(t,e,n){"use strict";var s=n("6057"),r=n.n(s);r.a},db97:function(t,e,n){},e94e:function(t,e,n){t.exports=n.p+"img/avatar.002e6be5.jpeg"}});
//# sourceMappingURL=app.e29cc6c1.js.map